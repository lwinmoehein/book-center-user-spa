(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"2f86":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bottom-12 fixed w-full left-0 md:left-auto md:bottom-auto md:p-5 md:top-0 md:right-0 md:w-3/12 font-bold",class:{"bottom-0":!t.isLoggedIn}},[e("transition-group",{attrs:{name:"fade"}},[t.dataMessage?e("p",{key:"error",staticClass:"mt-2 text-sm bg-green-400 pb-2 pt-2 text-white w-full flex flex-col items-start md:rounded-md"},[e("span",{staticClass:"ml-2"},[t._v(t._s(t.dataMessage))])]):t._e(),t.dataError&&"string"===t.getType(t.dataError)?e("p",{key:"error",staticClass:"mt-2 text-sm bg-red-400 pb-2 pt-2 text-white w-full flex flex-col items-start md:rounded-md"},[e("span",{staticClass:"ml-2"},[t._v(t._s(t.dataError))])]):t._e(),"object"===t.getType(t.dataError)?e("ul",{key:"error-list",staticClass:"mt-2 text-sm bg-red-400 pb-2 pt-2 text-white w-full flex flex-col items-start md:rounded-md"},t._l(t.errorKeys,(function(s){return e("li",{key:s},[e("ul",{staticClass:"ml-2 mb-1"},t._l(t.getErrors(s),(function(s,a){return e("li",{key:a+"-error",staticClass:"transition-opacity ease-in duration-700 opacity-100 hover:opacity-0"},[t._v(" "+t._s(s)+" ")])})),0)])})),0):t._e()])],1)},r=[],l={name:"FlashMessage",props:{message:{type:String,default:null},error:{type:[Object,String],default:null},isLoggedIn:{type:Boolean,default:!0}},data(){return{dataMessage:null,dataError:null}},computed:{errorKeys(){return this.dataError&&"string"!==this.getType(this.dataError)?Object.keys(this.dataError):null}},watch:{error(){this.dataError=this.error,setTimeout(()=>{this.dataError=null},2e3)},message(){this.dataMessage=this.message,setTimeout(()=>{this.dataMessage=null},2e3)}},methods:{getErrors(t){return this.dataError[t]},getType(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}},filters:{titleCase(t){return t.replace("_"," ")}}},o=l,n=s("2877"),i=Object(n["a"])(o,a,r,!1,null,null,null);e["a"]=i.exports},"68f7":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("button",t._g({staticClass:"px-2.5 py-1.5 border border-transparent text-xs rounded shadow-sm text-white bg-blue-400 hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 text-center transition",attrs:{type:t.type}},t.$listeners),[t._v(" "+t._s(t.text)+" ")])},r=[],l={name:"BaseBtn",props:{type:{type:String,default:"submit"},text:{type:String,default:"Submit"}}},o=l,n=s("2877"),i=Object(n["a"])(o,a,r,!1,null,null,null);e["a"]=i.exports},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"max-w-sm p-5 m-auto"},[e("h2",{staticClass:"mb-4 text-xl font-bold text-center"},[t._v("Login")]),e("LoginForm",{staticClass:"p-5 bg-white border rounded shadow"}),e("p",{staticClass:"mt-2 text-center text-gray-500"},[e("router-link",{staticClass:"text-pink-500 transition hover:text-pink-600",attrs:{to:"/register"}},[t._v("Register")])],1)],1)},r=[],l=function(){var t=this,e=t._self._c;return e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("BaseInput",{staticClass:"mb-2",attrs:{type:"email",label:"Email",name:"email",autocomplete:"email",placeholder:"luke@jedi.com"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e("BaseInput",{staticClass:"mb-4",attrs:{type:"password",label:"Password",name:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticClass:"flex justify-between"},[e("BaseBtn",{attrs:{type:"submit",text:"Login"}}),e("router-link",{staticClass:"text-sm base-link",attrs:{to:"/forgot-password"}},[t._v(" Forgot your password? ")])],1),e("FlashMessage",{attrs:{error:t.error,isLoggedIn:!1}})],1)},o=[],n=(s("14d9"),s("d9e2"),s("2fa3")),i=s("68f7"),u=s("b3b3"),d=s("b012"),p=s("2f86"),c={name:"LoginView",components:{BaseBtn:i["a"],BaseInput:u["a"],FlashMessage:p["a"]},data(){return{email:null,password:null,error:null}},methods:{async login(){const t={email:this.email,password:this.password};this.error=null;try{await d["a"].login(t);const e=await this.$store.dispatch("auth/getAuthUser");if(!e){const t=Error("Unable to fetch user after login, check your API settings.");throw t.name="Fetch User",t}this.$store.dispatch("auth/setGuest",{value:"isNotGuest"}),this.$router.push("/dashboard")}catch(e){this.error=Object(n["a"])(e)}}}},m=c,f=s("2877"),g=Object(f["a"])(m,l,o,!1,null,null,null),b=g.exports,h={name:"LoginView",components:{LoginForm:b}},y=h,w=Object(f["a"])(y,a,r,!1,null,null,null);e["default"]=w.exports},b3b3:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[t.label?e("label",{staticClass:"text-sm text-gray-500",class:{"sr-only":!t.showLabel},attrs:{for:t.name}},[t._v(" "+t._s(t.label)+" ")]):t._e(),e("input",{staticClass:"block w-full px-3 py-2 placeholder-gray-400 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-blue-500 focus:border-blue-500",attrs:{id:t.name,type:t.type,required:t.required,placeholder:t.placeholder,autocomplete:t.autocomplete,disabled:t.isDisabled},domProps:{value:t.value},on:{input:t.updateValue}})])},r=[],l={name:"BaseInput",inheritAttrs:!1,props:{name:{type:String,required:!0},label:{type:String,default:""},value:{type:[String,Number]},type:{type:String,default:"text"},showLabel:{type:Boolean,default:!0},required:{type:Boolean,default:!1},placeholder:{type:String,default:null},autocomplete:{type:String,default:null},isDisabled:{type:Boolean,default:!1}},methods:{updateValue(t){return this.$emit("input",t.target.value)}}},o=l,n=s("2877"),i=Object(n["a"])(o,a,r,!1,null,null,null);e["a"]=i.exports}}]);
//# sourceMappingURL=login.5d4e55e7.js.map