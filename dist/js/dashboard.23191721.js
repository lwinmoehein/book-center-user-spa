(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{1253:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full"},[t("Loading",{attrs:{isLoading:e.loading||e.want_to_read_loading}}),t("FlashMessage",{attrs:{error:e.error,message:e.message}}),t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.loading||null==e.book?e._e():t("div",{staticClass:"p-2"},[t("div",{staticClass:"flex mb-5 p-3"},[t("font-awesome-icon",{staticClass:"font-bold text-xl mr-3",attrs:{icon:"fa-solid fa-arrow-left"},on:{click:e.goBack}}),t("div",{staticClass:"font-semibold"},[e._v(" "+e._s(e.book.title.substring(0,30))+" ")])],1),t("div",{staticClass:"flex p-3 flex-row overflow-hidden"},[t("div",{staticClass:"mr-2"},[t("img",{staticClass:"h-48 w-40 rounded-md object-cover flex-none",attrs:{src:e.book.cover_url,alt:""}})]),t("div",{staticClass:"flex flex-col"},[t("div",{staticClass:"font-semibold"},[e._v(e._s(e.book.title.substring(0,30)))]),t("div",{staticClass:"flex flex-wrap gap-1 overflow-hidden"},e._l(e.book.authors,(function(o){return t("div",{key:o.id,staticClass:"p-1 text-xs"},[e._v(" "+e._s(o.name)+" ")])})),0),t("div",[e._v(" Average Rating "),t("span",{staticClass:"text-blue-500"},[e._v(e._s(Number(e.book.average_rating).toFixed(1)))])]),t("div",{staticClass:"flex mt-3"},[t("button",{staticClass:"pl-2 pr-2 pt-1 pb-1 text-white rounded-md",class:{"bg-green-500":e.isInToRead,"bg-blue-400":!e.isInToRead},on:{click:e.toggleWantToRead}},[t("span",{staticClass:"mr-2"},[e._v("Want To Read")]),e.isInToRead?t("font-awesome-icon",{attrs:{icon:"fa-solid fa-check"}}):t("font-awesome-icon",{attrs:{icon:"fa-solid fa-plus"}})],1)])])]),t("div",{staticClass:"p-3"},[t("p",[e._v(" "+e._s(e.book.description)+" ")]),t("div",{staticClass:"font-semibold mt-5 mb-2"},[e._v("Categories:")]),t("div",{staticClass:"flex flex-nowrap text-center overflow-scroll bg-white gap-5 scrollbar-hide"},e._l(e.book.categories,(function(o){return t("div",{key:o.id,staticClass:"bg-blue-400 pl-1 pr-1 flex-none rounded-md text-white"},[e._v(e._s(o.name))])})),0)]),t("div",{staticClass:"p-3"},[t("Reviews",{attrs:{book:e.book}})],1)])])],1)},a=[],i=o("2f62"),r=function(){var e=this,t=e._self._c;return t("div",[e.reviewed_user_ids.includes(e.authUser.id)?e._e():t("ReviewInput",{on:{"on-review-input-clicked":e.postReview}}),t("div",{staticClass:"flex flex-col"},[e._l(e.book.reviews,(function(o){return t("Review",{key:"r"+o.id,attrs:{review:o},on:{"on-review-update":e.updateReview,"on-review-delete":e.deleteReview}})})),e.book.reviews.length<=0?t("div",{staticClass:"w-full h-20 flex justify-center items-center"},[t("div",[e._v("No reviews yet.")])]):e._e()],2)],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-none flex-col p-2 mb-2 border-b"},[t("div",{staticClass:"flex justify-between items-center"},[t("span",{staticClass:"flex-1 font-bold"},[e._v(e._s(e.review.user.name))]),t("div",{staticClass:"flex-1 relative inline-block"},[e.isOwnReview?t("font-awesome-icon",{staticClass:"absolute right-2",attrs:{icon:"fa-solid fa-ellipsis-v"},on:{click:e.toggleMenu}}):e._e(),e.isMenuOpened?t("div",{staticClass:"z-10 mt-8 absolute w-44 bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700"},[t("div",{staticClass:"py-1 text-sm text-gray-700 dark:text-gray-200",attrs:{"aria-labelledby":"dropdownDefault"}},[t("div",[t("div",{staticClass:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",attrs:{href:"#"},on:{click:e.onReviewEdit}},[e._v(" Edit")])]),t("div",[t("div",{staticClass:"block text-red-500 py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600",attrs:{href:"#"},on:{click:e.onReviewDelete}},[e._v("Delete ")])])])]):e._e()],1)]),t("div",[t("div",{staticClass:"flex"},[e._l(e.review.star,(function(e){return t("font-awesome-icon",{key:"star"+e,staticClass:"text-blue-500",attrs:{icon:"fa-solid fa-star"}})})),e._l(5-e.review.star,(function(o){return t("font-awesome-icon",{key:e.review.id+"s"+o,attrs:{icon:"fa-regular fa-star"}})}))],2)]),t("div",{staticClass:"text-sm text-gray-400"},[e._v(" "+e._s(e.review.created_at)+" ")]),t("div",{staticClass:"mt-2"},[e._v(e._s(e.review.body))]),t("ConfirmDialog",{attrs:{isClosed:e.isDeleteReviewDialogClosed},on:{"on-dialog-close":e.onToggleDeleteDialog,"on-dialog-confirm":e.onDeleteReviewConfirmed}}),e.isOwnReview?t("ReviewDialog",{attrs:{review:e.review,isClosed:e.isEditReviewDialogClosed},on:{"on-review-confirm":e.onEditReviewConfirmed,"on-dialog-close":e.onToggleEditDialog}}):e._e()],1)},d=[],c=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"fixed z-50 w-full h-full top-0 left-0 bg-white rounded-md px-8 py-6 space-y-5 drop-shadow-lg",class:{hidden:e.isClosed}},[t("h1",{staticClass:"text-2xl font-semibold"},[e._v(e._s(e.review?"Edit review":"Write a review"))]),t("div",{staticClass:"py-5 border-t border-b border-gray-300 mb-8"},[t("div",{staticClass:"mb-5 mt-3"},[t("div",{staticClass:"text-blue-400 text-sm mb-3 font-semibold"},[e._v("On a scale of 1 to 5 , how much did you liked the book?")]),t("div",{staticClass:"flex p-3 gap-5 pl-0"},e._l(5,(function(o){return t("div",{key:o},[o>e.currentStar?t("font-awesome-icon",{staticClass:"flex-1",attrs:{icon:"fa-regular fa-star"},on:{click:function(t){return e.updateStar(o)}}}):t("font-awesome-icon",{staticClass:"flex-1",attrs:{icon:"fa-solid fa-star"},on:{click:function(t){return e.updateStar(o)}}})],1)})),0)]),t("div",[t("div",{staticClass:"mb-3 text-sm text-blue-400 font-semibold"},[e._v("How you liked the book?")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentReviewText,expression:"currentReviewText"}],staticClass:"w-full border-blue-500",domProps:{value:e.currentReviewText},on:{input:function(t){t.target.composing||(e.currentReviewText=t.target.value)}}})])]),t("div",{staticClass:"flex justify-end gap-4"},[t("button",{staticClass:"px-5 py-2 bg-gray-500 hover:bg-gray-700 text-white cursor-pointer rounded-md",on:{click:function(t){return t.stopPropagation(),e.onCancelButtonClicked.apply(null,arguments)}}},[e._v(" Cancel")]),t("button",{staticClass:"px-7 py-2 bg-indigo-500 hover:bg-indigo-700 text-white cursor-pointer rounded-md",on:{click:function(t){return t.stopPropagation(),e.onConfirmButtonClicked.apply(null,arguments)}}},[e._v(" "+e._s(e.review?"Edit Review":"Post Review")+" Review")])])])])},u=[],g={name:"ReviewDialog",props:{review:{type:Object,default:null},isClosed:{type:Boolean,default:!0}},data(){return{currentReviewText:"",currentStar:0}},mounted(){this.review&&(this.currentReviewText=this.review.body,this.currentStar=this.review.star)},methods:{onConfirmButtonClicked(){let e={star:this.currentStar>0?this.currentStar:null,body:this.currentReviewText};this.$emit("on-review-confirm",e),this.currentReviewText="",this.currentStar=0},onCancelButtonClicked(){this.$emit("on-dialog-close")},updateStar(e){this.currentStar=e}}},h=g,m=o("2877"),f=Object(m["a"])(h,c,u,!1,null,null,null),v=f.exports,p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full h-full flex flex-col items-center justify-center bg-black top-0 left-0 fixed bg-opacity-50",class:{hidden:e.isClosed}},[t("div",{staticClass:"overflow-y-auto overflow-x-hidden fixed top-52 right-0 left-0 z-50 md:inset-0 h-modal md:h-full",attrs:{tabindex:"-1"}},[t("div",{staticClass:"relative p-4 w-full max-w-md h-full md:h-auto"},[t("div",{staticClass:"relative bg-white rounded-lg shadow dark:bg-gray-700"},[t("button",{staticClass:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white",attrs:{type:"button","data-modal-toggle":"popup-modal"},on:{click:e.onCancelButtonClicked}},[t("svg",{staticClass:"w-5 h-5",attrs:{"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})]),t("span",{staticClass:"sr-only"},[e._v("Close modal")])]),t("div",{staticClass:"p-6 text-center"},[t("svg",{staticClass:"mx-auto mb-4 w-14 h-14 text-gray-400 dark:text-gray-200",attrs:{"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})]),t("h3",{staticClass:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400"},[e._t("body",(function(){return[e._v("Are you sure?")]}))],2),t("button",{staticClass:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",attrs:{"data-modal-toggle":"popup-modal",type:"button"},on:{click:e.onConfirmButtonClicked}},[e._t("confirm",(function(){return[e._v("Confirm")]}))],2),t("button",{staticClass:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",attrs:{"data-modal-toggle":"popup-modal",type:"button"},on:{click:e.onCancelButtonClicked}},[e._v("No, "),e._t("cancel",(function(){return[e._v("Cancel")]}))],2)])])])])])},b=[],_={name:"ConfirmDialog",props:{isClosed:{type:Boolean,default:!0}},data(){return{}},mounted(){},methods:{onConfirmButtonClicked(){this.$emit("on-dialog-confirm")},onCancelButtonClicked(){this.$emit("on-dialog-close")}}},k=_,w=Object(m["a"])(k,p,b,!1,null,null,null),C=w.exports,x={name:"Review",components:{ReviewDialog:v,ConfirmDialog:C},props:["review"],computed:{...Object(i["b"])("auth",["authUser"]),isOwnReview(){return this.review.user.id==this.authUser.id}},data(){return{isEditReviewDialogClosed:!0,isDeleteReviewDialogClosed:!0,isMenuOpened:!1}},methods:{onToggleEditDialog(){this.isEditReviewDialogClosed=!this.isEditReviewDialogClosed},onToggleDeleteDialog(){this.isDeleteReviewDialogClosed=!this.isDeleteReviewDialogClosed},onEditReviewConfirmed(e){e.review_id=this.review.id,this.$emit("on-review-update",e)},onDeleteReviewConfirmed(){this.$emit("on-review-delete",this.review)},toggleMenu(){this.isMenuOpened=!this.isMenuOpened},onReviewEdit(){this.toggleMenu(),this.onToggleEditDialog()},onReviewDelete(){this.toggleMenu(),this.onToggleDeleteDialog()}},watch:{isEditReviewDialogClosed(){console.log(this.isEditReviewDialogClosed)}}},y=x,R=Object(m["a"])(y,l,d,!1,null,null,null),B=R.exports,T=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"flex justify-between mb-5 items-center"},[t("div",{staticClass:"font-semibold"},[e._v("Reviews:")]),e.authUser.emailVerified?t("div",{staticClass:"text-blue-500 font-semibold cursor-pointer rounded-md px-3 py-1 border-blue-500 border-2",on:{click:e.toggleDialog}},[e._v("Post Review")]):e._e()]),t("ReviewDialog",{attrs:{isClosed:e.isDialogClosed},on:{"on-review-confirm":e.onPostReviewClick,"on-dialog-close":e.onCloseDialogClicked}})],1)},D=[],j={name:"ReviewInput",components:{ReviewDialog:v},computed:{...Object(i["b"])("auth",["authUser"])},methods:{onPostReviewClick(e){this.$emit("on-review-input-clicked",e),this.currentReviewText=""},toggleDialog(){this.isDialogClosed=!this.isDialogClosed},onCloseDialogClicked(){this.isDialogClosed=!0}},data(){return{isDialogClosed:!0}}},$=j,O=Object(m["a"])($,T,D,!1,null,null,null),E=O.exports,L={name:"Reviews",components:{Review:B,ReviewInput:E},props:["book"],data(){return{reviewStar:0}},computed:{...Object(i["b"])("auth",["authUser"]),reviewed_user_ids(){return this.book.reviews.map(e=>e.user.id)}},methods:{postReview(e){e.book_id=this.book.id,this.$store.dispatch("bookDetail/postReview",e)},updateReview(e){this.$store.dispatch("bookDetail/updateReview",e)},deleteReview(e){this.$store.dispatch("bookDetail/deleteReview",e)}}},F=L,M=Object(m["a"])(F,r,n,!1,null,null,null),W=M.exports,S=o("2f86"),P=o("3a5e"),I=o("a440"),z={name:"BookDetail",components:{Reviews:W,FlashMessage:S["a"],Loading:P["a"]},computed:{...Object(i["b"])("bookDetail",["loading","error","book","message"],"auth"),...Object(i["b"])("wantToRead",["want_to_reads","user_want_to_reads","want_to_read_loading","want_to_read_error"]),isInToRead(){return!(this.user_want_to_reads.length<=0)}},created(){this.getWantToReads(),this.$store.dispatch("bookDetail/getBook",this.$route.params.id)},watch:{},methods:{goBack(){this.$router.go(-1)},toggleWantToRead(){this.isInToRead?I["a"].deleteWantToRead({book_id:this.book.id}).then(()=>{this.getWantToReads(),this.$store.dispatch("bookDetail/setMessage","Removed from want to read list.")}):I["a"].storeWantToRead({book_id:this.book.id}).then(()=>{this.getWantToReads(),this.$store.dispatch("bookDetail/setMessage","Added to want to read list.")})},getWantToReads(){this.$store.dispatch("wantToRead/getWantToRead",{book_id:this.$route.params.id})}},unmounted(){this.$store.dispatch("bookDetail/setBookValue",null)}},N=z,U=Object(m["a"])(N,s,a,!1,null,null,null);t["default"]=U.exports},"2f86":function(e,t,o){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bottom-12 fixed w-full left-0 md:left-auto md:bottom-auto md:p-5 md:top-0 md:right-0 md:w-3/12 font-bold",class:{"bottom-0":!e.isLoggedIn}},[t("transition-group",{attrs:{name:"fade"}},[e.dataMessage?t("p",{key:"error",staticClass:"mt-2 text-sm bg-green-400 pb-2 pt-2 text-white w-full flex flex-col items-start md:rounded-md"},[t("span",{staticClass:"ml-2"},[e._v(e._s(e.dataMessage))])]):e._e(),e.dataError&&"string"===e.getType(e.dataError)?t("p",{key:"error",staticClass:"mt-2 text-sm bg-red-400 pb-2 pt-2 text-white w-full flex flex-col items-start md:rounded-md"},[t("span",{staticClass:"ml-2"},[e._v(e._s(e.dataError))])]):e._e(),"object"===e.getType(e.dataError)?t("ul",{key:"error-list",staticClass:"mt-2 text-sm bg-red-400 pb-2 pt-2 text-white w-full flex flex-col items-start md:rounded-md"},e._l(e.errorKeys,(function(o){return t("li",{key:o},[t("ul",{staticClass:"ml-2 mb-1"},e._l(e.getErrors(o),(function(o,s){return t("li",{key:s+"-error",staticClass:"transition-opacity ease-in duration-700 opacity-100 hover:opacity-0"},[e._v(" "+e._s(o)+" ")])})),0)])})),0):e._e()])],1)},a=[],i={name:"FlashMessage",props:{message:{type:String,default:null},error:{type:[Object,String],default:null},isLoggedIn:{type:Boolean,default:!0}},data(){return{dataMessage:null,dataError:null}},computed:{errorKeys(){return this.dataError&&"string"!==this.getType(this.dataError)?Object.keys(this.dataError):null}},watch:{error(){this.dataError=this.error,setTimeout(()=>{this.dataError=null},2e3)},message(){this.dataMessage=this.message,setTimeout(()=>{this.dataMessage=null},2e3)}},methods:{getErrors(e){return this.dataError[e]},getType(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}},filters:{titleCase(e){return e.replace("_"," ")}}},r=i,n=o("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);t["a"]=l.exports},"38c0":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Loading",{attrs:{isLoading:e.want_to_read_loading}}),e._m(0),t("div",{staticClass:"flex w-full h-full p-2"},[t("FlashMessage",{attrs:{error:e.want_to_read_error,message:e.message}}),t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.want_to_reads.length>0?t("div",{ref:"wantToReadPagination",staticClass:"flex flex-col gap-3 w-full h-full lg:w-2/4 md:flex-row md:flex-wrap lg:justify-items-center",on:{scroll:e.onScroll}},e._l(e.want_to_reads,(function(o){return t("HorizontalBook",{key:o.id,staticClass:"w-full h-40",attrs:{book:o},on:{"on-book-remove-clicked":e.removeWantToRead,"on-book-clicked":e.onBookClicked}})})),1):e._e()]),t("transition",{attrs:{name:"fade"}},[e.want_to_read_error?t("FlashMessage",{key:"want_to_read_error",attrs:{error:e.want_to_read_error}}):e._e()],1),!e.want_to_read_loading&&e.want_to_reads.length<=0?t("div",{staticClass:"w-full h-full flex flex-col items-center justify-center mt-60 font-semibold"},[t("div",[e._v("Please add some of your favorite books")]),t("div",[e._v("To enjoy them later :)")])]):e._e()],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-3 mb-3 sticky top-0 left-0 bg-white"},[t("p",{staticClass:"font-bold text-blue-800 text-xl mb-2"},[e._v("Want to Reads")]),t("hr")])}],i=(o("14d9"),o("2f62")),r=o("2f86"),n=o("3a5e"),l=function(){var e=this,t=e._self._c;return t("transition",{staticClass:"w-full h-44",attrs:{duration:{enter:500,leave:800}}},[t("div",{staticClass:"shadow-md h-44 w-full flex flex-none flex-row",on:{click:function(t){return e.$emit("on-book-clicked",e.book)}}},[t("img",{staticClass:"h-44 w-36 rounded-md object-cover flex-none",attrs:{src:e.book.cover_url,alt:""}}),t("div",{staticClass:"p-2 w-full"},[t("div",{staticClass:"font-semibold"},[e._v(e._s(e.book.title.substring(0,20)))]),t("div",{staticClass:"text-blue-500"},[e._v(e._s(e.book.price)+" AED")]),t("div",[t("div",{staticClass:"flex gap-1 overflow-hidden"},e._l(e.book.authors,(function(o,s){return t("div",{key:o.id,staticClass:"p-1 text-xs"},[e._v(" "+e._s(o.name)+" "+e._s(s!=e.book.authors.length-1?",":"")+" ")])})),0)]),t("div",[t("button",{staticClass:"rounded-md bg-red-400 border-2 text-white px-5 py-1",on:{click:function(t){return t.stopPropagation(),e.$emit("on-book-remove-clicked",e.book)}}},[t("span",{staticClass:"mr-2"},[e._v("Remove")]),t("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash-can"}})],1)])])])])},d=[],c={name:"HorizontalBook",props:["book"]},u=c,g=o("2877"),h=Object(g["a"])(u,l,d,!1,null,null,null),m=h.exports,f=o("a440"),v={name:"WantToReadView",components:{FlashMessage:r["a"],Loading:n["a"],HorizontalBook:m},data(){return{isWantToReadsFetching:!1,message:null}},computed:{...Object(i["b"])("wantToRead",["want_to_reads","want_to_read_error","want_to_read_loading","meta","links","current_page"])},created(){this.want_to_reads.length>0||(this.$store.dispatch("wantToRead/setCurrentPage",1),this.$store.dispatch("wantToRead/clearWantToReads"),this.getWantToReads(),window.addEventListener("scroll",()=>{this.onScroll()}))},watch:{want_to_read_loading(){this.want_to_read_loading||(this.isWantToReadsFetching=!1)}},methods:{removeWantToRead(e){this.$store.dispatch("wantToRead/setLoading",!0),f["a"].deleteWantToRead({book_id:e.id}).then(()=>{this.message="Removed book from the list",this.$store.dispatch("wantToRead/removeWantToRead",{book_id:e.id}),this.$store.dispatch("wantToRead/setLoading",!1),this.$store.dispatch("wantToRead/setMessage","Removed from want to read list.")}).catch(()=>{this.$store.dispatch("wantToRead/setLoading",!1)})},getWantToReads(){this.$store.dispatch("wantToRead/getWantToReads",{page:this.current_page})},onScroll(){let e=document.documentElement.getBoundingClientRect().bottom;e>document.documentElement.clientHeight+100||this.isWantToReadsFetching||this.current_page>=this.meta.last_page||(this.$store.dispatch("wantToRead/setCurrentPage",this.current_page+1),this.isWantToReadsFetching=!0,this.getWantToReads())},onBookClicked(e){this.$router.push({name:"want-to-read-book-detail",params:{id:e.id}})}}},p=v,b=Object(g["a"])(p,s,a,!1,null,null,null);t["default"]=b.exports},"3a5e":function(e,t,o){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full h-full flex flex-col items-center justify-center fixed",class:{hidden:!e.isLoading,"bg-black bg-opacity-40":e.hasOverlay}},[t("font-awesome-icon",{staticClass:"animate-spin w-12 h-12 text-blue-600",attrs:{icon:"fa-solid fa-spinner"}})],1)},a=[],i={name:"Loading",props:{isLoading:{type:Boolean,default:!1},hasOverlay:{type:Boolean,default:!0}}},r=i,n=o("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);t["a"]=l.exports},4886:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full"},[t("Loading",{attrs:{isLoading:e.loading}}),e._m(0),t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("div",{staticClass:"grid grid-cols-2 gap-3 auto-rows-fr p-2"},e._l(e.all_categories,(function(o){return t("div",{key:o.id,staticClass:"p-3 md:h-24 flex justify-center items-center box-decoration-slice bg-gradient-to-r from-blue-400 to-green-500 text-white",on:{click:function(t){return e.onCategoryClicked(o)}}},[t("span",{staticClass:"font-extrabold"},[e._v(e._s(o.name))])])})),0)]),t("transition",{attrs:{name:"fade"}},[e.error?t("FlashMessage",{key:"error",attrs:{error:e.error}}):e._e()],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-3 mb-3"},[t("p",{staticClass:"font-bold text-blue-800 text-xl mb-2"},[e._v("Available Categories ")]),t("hr")])}],i=(o("14d9"),o("2f62")),r=o("2f86"),n=o("3a5e"),l={name:"Categories",components:{FlashMessage:r["a"],Loading:n["a"]},computed:{...Object(i["b"])("category",["loading","error","all_categories"])},created(){this.$store.dispatch("category/getAllCategories")},watch:{},methods:{onCategoryClicked(e){this.$router.push({name:"category-detail",params:{id:e.id}})}}},d=l,c=o("2877"),u=Object(c["a"])(d,s,a,!1,null,null,null);t["default"]=u.exports},7277:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Books")],1)},a=[],i=o("2f62"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full"},[e.loading&&!(e.books.length>0||e.recommended_books.length>0)?t("Loading",{attrs:{isLoading:!0}}):t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("div",{staticClass:"p-2"},[t("div",{staticClass:"p-3 mb-3 sticky top-0 left-0 bg-white"},[t("p",{staticClass:"font-bold text-blue-800 text-xl mb-2"},[e._v("Home")]),t("hr")]),t("div",{},[t("div",{staticClass:"flex flex-nowrap text-center overflow-scroll sticky top-0 md:relative bg-white gap-5 border-gray-300 scrollbar-hide"},e._l(e.all_languages,(function(o){return t("div",{key:o.id,staticClass:"focus-within:pt-3 flex-grow w-20 flex-none cursor-pointer flex justify-center",on:{click:function(t){return e.onLanguageTabClicked(o)}}},[t("div",{staticClass:"border-b-2 pl-2 pr-2 font-bold",class:{"border-blue-400 text-blue-600":e.current_tab==o.id}},[e._v(" "+e._s(o.name)+" ")])])})),0),t("div",{staticClass:"p-3 md:flex-col md:items-center w-full"},[t("div",{staticClass:"flex justify-between mt-5 mb-2"},[t("div",{staticClass:"font-bold"},[e._v("Popular Books")])]),e.books.length>0?t("div",{ref:"topBookScroller",staticClass:"flex flex-row overflow-scroll h-60 md:h-96 gap-3 md:gap-16 bg-scroll scrollbar-hide",class:{"animate-pulse":e.isTopBooksFetching},on:{scroll:e.onPopularBooksScroll}},[e._l(e.books,(function(o){return t("Book",{key:o.id,staticClass:"w-24 md:w-48",attrs:{book:o},on:{"on-book-clicked":function(t){return e.onBookClicked(o)}}})})),t("div",{staticClass:"pr-6 pl-6 flex items-center justify-center"},[this.current_top_page>=e.meta.last_page&&!e.isTopBooksFetching&&e.books.length>0?t("div",{staticClass:"mb-10 text-blue-500"},[e._v(" No More Books! ")]):e._e()])],2):e._e(),!e.loading&&e.books.length<=0?t("div",{staticClass:"h-52 flex justify-center items-center"},[t("div",{staticClass:"text-blue-500"},[e._v(" No Books Found! ")])]):e._e()]),t("div",{staticClass:"p-3"},[t("div",{staticClass:"flex justify-between mt-5 mb-2"},[t("div",{staticClass:"font-bold"},[e._v(" Recommended Books ")])]),e.recommended_books.length>0?t("div",{ref:"recommendedBookScroller",staticClass:"flex flex-row overflow-scroll h-60 md:h-96 gap-3 md:gap-16 bg-scroll scrollbar-hide",class:{"animate-pulse":e.isRecommendedBooksFetching},on:{scroll:e.onRecommendedBooksScroll}},[e._l(e.recommended_books,(function(o){return t("Book",{key:"rec"+o.id,staticClass:"w-24 md:w-48",attrs:{book:o},on:{"on-book-clicked":function(t){return e.onBookClicked(o)}}})})),t("div",{staticClass:"pr-6 pl-6 flex items-center justify-center"},[this.current_recommended_page==e.recommended_meta.last_page?t("div",{staticClass:"mb-10 text-blue-500"},[e._v(" No More Books ")]):e._e()])],2):e._e(),!e.loading&&e.recommended_books.length<=0?t("div",{staticClass:"h-52 flex justify-center items-center"},[t("div",{staticClass:"text-blue-500"},[e._v(" No Books Found! ")])]):e._e()])])])])],1)},n=[],l=(o("14d9"),o("c71c")),d=o("3a5e"),c={name:"Books",components:{Book:l["a"],Loading:d["a"]},data(){return{isTopBooksFetching:!1,isRecommendedBooksFetching:!1}},computed:{...Object(i["b"])("book",["loading","error","books","meta","links","current_top_page","current_recommended_page","current_tab","recommended_books","recommended_meta","recommended_links"]),...Object(i["b"])("language",["all_languages"]),...Object(i["b"])("auth",["authUser"])},created(){this.books.length>0||(this.$store.dispatch("language/getLanguages"),this.updateTopBooks(),this.updateRecommendedBooks())},watch:{loading(){this.loading||(this.isTopBooksFetching=this.isRecommendedBooksFetching=!1)}},methods:{onLanguageTabClicked(e){this.$store.dispatch("book/setCurrentTab",e.id),this.$store.dispatch("book/setCurrentTopPage",1),this.$store.dispatch("book/setCurrentRecommendedPage",1),this.updateTopBooks(!1),this.updateRecommendedBooks(!1)},updateTopBooks(e=!0){this.$store.dispatch("book/getBooks",{page:this.current_top_page,languages:[this.current_tab],isPaginated:e})},updateRecommendedBooks(e=!0){this.$store.dispatch("book/getRecommendedBooks",{page:this.current_recommended_page,languages:[this.current_tab],isPaginated:e})},onPopularBooksScroll(){if(this.isTopBooksFetching)return;let e=this.$refs.topBookScroller;if(e.scrollWidth-30<=e.scrollLeft+e.offsetWidth){if(this.current_top_page>=this.meta.last_page)return;this.$store.dispatch("book/setCurrentTopPage",this.current_top_page+1),this.isTopBooksFetching=!0,this.updateTopBooks()}},onRecommendedBooksScroll(){if(this.isRecommendedBooksFetching)return;let e=this.$refs.recommendedBookScroller;if(e.scrollWidth-30<=e.scrollLeft+e.offsetWidth){if(this.current_recommended_page>=this.recommended_meta.last_page)return;this.$store.dispatch("book/setCurrentRecommendedPage",this.current_recommended_page+1),this.isRecommendedBooksFetching=!0,this.updateRecommendedBooks()}},onBookClicked(e){this.$router.push({name:"book-detail",params:{id:e.id}})}}},u=c,g=o("2877"),h=Object(g["a"])(u,r,n,!1,null,null,null),m=h.exports,f={name:"Dashboard",components:{Books:m},computed:{...Object(i["b"])("auth",["authUser"])}},v=f,p=Object(g["a"])(v,s,a,!1,null,null,null);t["default"]=p.exports},c71c:function(e,t,o){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-none flex-col",on:{click:function(t){return e.$emit("on-book-clicked",e.book)}}},[t("img",{staticClass:"h-3/5 rounded-md object-cover flex-none",attrs:{src:e.book.cover_url,alt:""}}),t("div",[e._v("Rating "),t("span",{staticClass:"text-blue-500"},[e._v(e._s(Number(e.book.average_rating).toFixed(1)))])]),t("div",{staticClass:"font-semibold"},[e._v(e._s(e.book.title.substring(0,20)))])])},a=[],i={name:"Book",props:["book"]},r=i,n=o("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);t["a"]=l.exports},f7dd:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full h-full"},[t("Loading",{attrs:{isLoading:e.loading}}),e.loading?e._e():t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("div",{staticClass:"p-5"},[t("div",{staticClass:"flex mb-5"},[t("font-awesome-icon",{staticClass:"font-bold text-xl mr-3",attrs:{icon:"fa-solid fa-arrow-left"},on:{click:e.goBack}}),t("div",[e._v(" "+e._s(e.category.name)+" ")])],1),t("div",{staticClass:"grid gap-2 grid-cols-3 md:grid-cols-4 lg:grid-cols-8"},e._l(e.books,(function(o){return t("Book",{key:o.id,staticClass:"h-64 md:h-96",attrs:{book:o},on:{"on-book-clicked":e.onBookClicked}})})),1)])]),t("transition",{attrs:{name:"fade"}},[e.error?t("FlashMessage",{key:"error",attrs:{error:e.error}}):e._e()],1)],1)},a=[],i=(o("14d9"),o("2f62")),r=o("2f86"),n=o("c71c"),l=o("3a5e"),d={name:"CategoryDetail",components:{FlashMessage:r["a"],Book:n["a"],Loading:l["a"]},computed:{...Object(i["b"])("categoryDetail",["loading","error","category","books","books_meta","books_links","message","current_page"])},data(){return{isBooksFetching:!1}},created(){this.books.length>0||(this.$store.dispatch("categoryDetail/getCategory",this.$route.params.id),this.getBooks(),window.addEventListener("scroll",()=>{this.onScroll()}))},watch:{loading(){this.loading||(this.isBooksFetching=!1)}},methods:{goBack(){this.$router.replace({path:"/category"})},onBookClicked(e){this.$router.push({name:"category-book-detail",params:{id:e.id}})},getBooks(){this.$store.dispatch("categoryDetail/getCategoryBooks",{page:this.current_page,category_id:this.$route.params.id})},onScroll(){let e=document.documentElement.getBoundingClientRect().bottom;e>document.documentElement.clientHeight+100||this.isBooksFetching||this.current_page>=this.books_meta.last_page||(this.$store.dispatch("categoryDetail/setCurrentPage",this.current_page+1),this.isBooksFetching=!0,this.getBooks())}}},c=d,u=o("2877"),g=Object(u["a"])(c,s,a,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=dashboard.23191721.js.map